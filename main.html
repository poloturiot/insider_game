<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4 Players Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            text-align: center;
            padding: 20px;
        }
        h1 {
            color: #333;
        }
        .role-section, .word-section, .instructions {
            margin: 20px 0;
        }
        .button {
            padding: 10px 20px;
            font-size: 16px;
            margin: 10px;
            cursor: pointer;
            border: none;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
        }
        .hidden {
            display: none;
        }
        .visible {
            display: block;
        }
        .instructions {
            font-style: italic;
            color: #555;
        }
    </style>
</head>
<body>

    <h1>4 Players Game</h1>

    <!-- Instructions -->
    <div class="instructions" id="instructions">
        Roles have been assigned automatically. Players, click "See Your Role" to view it.
    </div>

    <!-- Role assignment section -->
    <div class="role-section" id="playerRoles"></div>

    <!-- Master reveals themselves -->
    <div class="role-section">
        <button class="button hidden" id="revealMasterBtn" onclick="revealMaster()">Reveal Master</button>
        <div id="masterReveal" class="hidden"></div>
    </div>

    <!-- Secret word section -->
    <div class="word-section hidden" id="wordSection">
        <h2>See the Secret Word</h2>
        <button class="button" id="seeSecretWordBtn" onmousedown="showSecretWord()" onmouseup="hideSecretWord()">See the Secret Word</button>
        <div id="wordDisplay" class="hidden"></div>
    </div>

    <script>
        // Player roles
        let roles = ["Master", "Insider", "Commoner", "Commoner"];
        let players = [];
        let randomWord = '';

        window.onload = function () {
            // Shuffle the roles when the page loads
            assignRoles();

            // Generate the secret word when the page loads
            generateWord();
        };

        // Assign roles automatically on page load
        function assignRoles() {
            players = roles.sort(() => Math.random() - 0.5);

            let playerRolesDiv = document.getElementById('playerRoles');
            playerRolesDiv.innerHTML = '';

            players.forEach((role, index) => {
                // Create a hidden role for each player
                playerRolesDiv.innerHTML += `<div id="player${index + 1}">Player ${index + 1}: 
                    <span class="hidden" id="role${index + 1}">${role}</span>
                    </div>`;
                playerRolesDiv.innerHTML += `<button class="button" onclick="showRole(${index + 1})">See Your Role</button><br/>`;
            });

            // Show the "Reveal Master" button
            document.getElementById('revealMasterBtn').classList.remove('hidden');
        }

        // Show individual role to each player for 5 seconds
        function showRole(playerNumber) {
            let roleElement = document.getElementById(`role${playerNumber}`);
            roleElement.classList.remove('hidden');

            // Hide the role after 5 seconds
            setTimeout(() => {
                roleElement.classList.add('hidden');
            }, 5000);
        }

        // Reveal master
        function revealMaster() {
            let masterIndex = players.indexOf('Master') + 1;
            document.getElementById('masterReveal').innerHTML = `The Master is Player ${masterIndex}.`;
            document.getElementById('masterReveal').classList.remove('hidden');
            document.getElementById('wordSection').classList.remove('hidden');
            document.getElementById('revealMasterBtn').classList.add('hidden');

            updateInstructions('Master and Insider, press "See the Secret Word" to view the word.');
        }

        // Generate the word once when the page loads
        function generateWord() {
            const words = ["apple", "banana", "mountain", "river", "computer"];
            randomWord = words[Math.floor(Math.random() * words.length)];
        }

        // Show the secret word while the button is pressed
        function showSecretWord() {
            let wordDisplay = document.getElementById('wordDisplay');
            wordDisplay.innerHTML = `The secret word is: <strong>${randomWord}</strong>`;
            wordDisplay.classList.remove('hidden');
        }

        // Hide the secret word when the button is released
        function hideSecretWord() {
            document.getElementById('wordDisplay').classList.add('hidden');
        }

        // Update instructions for players
        function updateInstructions(message) {
            document.getElementById('instructions').innerText = message;
        }
    </script>
</body>
</html>
